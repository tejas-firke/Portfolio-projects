# Terraform setup to create AWS EC2 + NGINX Setup 

This repository contains a Terraform configuration that provisions:
- VPC, public subnet, Internet Gateway, and route table
- TLS RSA key pair (saved locally as `<key_name>.pem`)
- Security group allowing SSH and HTTP
- An Amazon Linux 2 EC2 instance with NGINX installed via user-data
- Outputs the EC2 public IP

> Location: c:\Users\PATH\main.tf

## Prerequisites

- Terraform (v1.x compatible)
- AWS credentials configured (via `aws configure` or environment variables)
- PowerShell or terminal on Windows

## Files

- `main.tf` — Terraform configuration (VPC, subnet, IGW, route table, SG, EC2, key pair)
- `<key_name>.pem` — Private key generated by Terraform (created in working directory)

## Quick usage

Open PowerShell in `c:\Users\PATH\TF-aws` and run:

```powershell
terraform init
terraform plan -out=tfplan
terraform apply tfplan
```

After apply, Terraform will print outputs. Example to SSH into the instance (Amazon Linux 2):

```powershell
# On Windows PowerShell
# Ensure the .pem file exists in the current directory (e.g., tf-key.pem)
ssh -i .\tf-key.pem ec2-user@<EC2_PUBLIC_IP>
```

If SSH complains about permissions, on Windows use:
```powershell
icacls .\tf-key.pem /inheritance:r
icacls .\tf-key.pem /grant:r "${env:USERNAME}:(R)"
```

On WSL / Linux / macOS:
```bash
chmod 600 tf-key.pem
ssh -i tf-key.pem ec2-user@<EC2_PUBLIC_IP>
```

## Important notes / variables to check

- Region is set in `provider "aws"` (default: us-west-2). Change if needed.
- AMI is `ami-ID` (Amazon Linux 2). You can replace it with a region-appropriate AMI.
- Private key file name is `${var.key_name}.pem` (default `tf-key.pem`). Keep it secure.
- Security group currently allows SSH (0.0.0.0/0) and HTTP (0.0.0.0/0). For SSH, restrict to your IP.
- The config creates a VPC and public subnet so it does not require a default VPC.

## Outputs

- `ec2_public_ip` — public IP of the EC2 instance
- The local `.pem` file created by Terraform can be used to SSH

## Cleanup

To destroy all resources:

```powershell
terraform destroy
# or
terraform destroy -auto-approve
```

## Troubleshooting

- "No default VPC" errors are avoided because this config creates its own VPC/subnet.
- If `ssh` fails, ensure the security group allows your source IP and you used the correct username (`ec2-user` for Amazon Linux).
- If AMI is invalid for the region, update the AMI id to a valid one for your region.

## Security reminder
Do not commit the generated private key (`*.pem`) to version control. Remove or add it to `.gitignore`.
